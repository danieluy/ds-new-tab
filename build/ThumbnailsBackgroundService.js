!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=217)}({217:function(e,t,n){"use strict";function r(e,t,n){u(n.url)||o(e).then(function(){return i(e)}).then(function(e){s({url:e[0].url,thumb:e[1]||null})}).catch(function(e){console.error("updateStored()",e)})}function o(e){return new Promise(function(t,n){chrome.tabs.query({active:!0,currentWindow:!0},function(r){r[0].id===e?t():n("Active tab has changed")})})}function u(e){if(e.match(/chrome:\/\//))return!0}function i(e){return Promise.all([a(e),c(e)])}function c(e){return new Promise(function(e,t){try{chrome.tabs.captureVisibleTab({format:"jpeg",quality:10},function(t){e(t)})}catch(e){t(e)}})}function a(e){return new Promise(function(t,n){try{chrome.tabs.get(e,function(e){return t(e)})}catch(e){n(e)}})}function s(e){var t=f();try{t.push(e),localStorage.setItem("dsNewTabThumbs",JSON.stringify(t))}catch(e){m=!0,console.log("Thumbnails background service's storage reached its limit and was emptied")}finally{chrome.runtime.sendMessage({thumbnails_service:"stored_updated"})}}function f(){var e=JSON.parse(localStorage.getItem("dsNewTabThumbs"));return Array.prototype.isPrototypeOf(e)&&!m||(l(),m=!1),e}function l(){localStorage.removeItem("dsNewTabThumbs"),localStorage.setItem("dsNewTabThumbs",JSON.stringify([]))}chrome.tabs.onUpdated.addListener(r),chrome.runtime.onMessage.addListener(function(e,t,n){"get_thumbnails"===e.thumbnails_service&&n(f())});var m=!1;window.resetThumbnailsService=l}});